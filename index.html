<!DOCTYPE html>
<html>
<head>
  <title>Clinique Parfum</title>
  <link rel="stylesheet" href="main.css">

  <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-database.js"></script>
  <script src="firebase.js"></script>

</head>
<body>

<header>
  <h1>Clinique Parfum</h1>
</header>

<section class="block">
  <h2>About Us</h2>
  <p>
    Welcome to Clinique Parfum. We specialize in high-end fragrances that leave lasting impressions.
    Each scent is crafted with precision and passion. Explore our premium collection below.
  </p>
</section>

<section class="block">
  <h2>Our Products</h2>

  <div id="productGrid" class="product-grid"></div>
</section>

<section class="block">
  <h2>Contact Us</h2>

  <form id="contactForm">
    <input type="text" id="name" placeholder="Your Name" required>
    <input type="text" id="email" placeholder="Your Email" required>
    <textarea id="message" placeholder="Message" required></textarea>
    <button type="submit">Send Message</button>
  </form>

  <p id="contactStatus"></p>
</section>

<script>
  const productRef = db.ref("products");

  function loadProducts() {
    const grid = document.getElementById("productGrid");

    productRef.on("value", snap => {
      grid.innerHTML = "";

      snap.forEach(child => {
        const p = child.val();
        const id = child.key;

        const card = document.createElement("div");
        card.className = "product-card";

        card.innerHTML = `
          <img src="images/${p.image}">
          <h3>${p.name}</h3>
          <p class="price">₱${p.price}</p>
          <button onclick="location.href='order.html?id=${id}'">Order</button>
        `;

        grid.appendChild(card);
      });
    });
  }

  loadProducts();

  // CONTACT FORM — saves to /messages
  document.getElementById("contactForm").addEventListener("submit", e => {
    e.preventDefault();

    const msgData = {
      name: name.value,
      email: email.value,
      message: message.value,
      time: Date.now()
    };

    db.ref("messages").push(msgData);

    document.getElementById("contactStatus").innerText = "Message sent!";
    e.target.reset();
  });
</script>

</body>
</html>
